"use strict";var __awaiter=this&&this.__awaiter||function(e,s,a,l){return new(a=a||Promise)(function(o,t){function n(e){try{i(l.next(e))}catch(e){t(e)}}function r(e){try{i(l.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?o(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,r)}i((l=l.apply(e,s||[])).next())})},__generator=this&&this.__generator||function(n,r){var i,s,a,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},c={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function e(o){return function(e){var t=[o,e];if(i)throw new TypeError("Generator is already executing.");for(;l=c&&t[c=0]?0:l;)try{if(i=1,s&&(a=2&t[0]?s.return:t[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,t[1])).done)return a;switch(s=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,s=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(a=0<(a=l.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3]))l.label=t[1];else if(6===t[0]&&l.label<a[1])l.label=a[1],a=t;else{if(!(a&&l.label<a[2])){a[2]&&l.ops.pop(),l.trys.pop();continue}l.label=a[2],l.ops.push(t)}}t=r.call(n,l)}catch(e){t=[6,e],s=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},fastify_plugin_1=(Object.defineProperty(exports,"__esModule",{value:!0}),__importDefault(require("fastify-plugin"))),typeorm_1=require("typeorm");require("reflect-metadata"),module.exports=(0,fastify_plugin_1.default)(function(e,u,t){return __awaiter(void 0,void 0,void 0,function(){var t,o,n,r,i,s,a,l,c;return __generator(this,function(e){return t=u.options.client,o=u.options.connection.host,n=u.options.connection.user,r=u.options.connection.password,i=u.options.connection.database,s=u.options.connection.port,a=u.options.entities,l=u.options.migrations,c=u.options.subscribers,console.log("TypeORM client",t),console.log("TypeORM host",o),console.log("TypeORM port",s),console.log("TypeORM user",n),console.log("TypeORM password",r),console.log("TypeORM database",i),console.log("TypeORM entities",a),(0,typeorm_1.createConnection)({type:t,host:o,port:Number(s),username:n,password:r,database:i,entities:[a],migrations:[l],subscribers:[c],logging:!0,synchronize:!1}).then(function(e){console.log("TypeORM isConnection",e.isConnected)}),[2]})})});