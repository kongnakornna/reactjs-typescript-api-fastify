"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SeminarTitleModel=void 0;var SeminarTitleModel=function(){function e(){}return e.prototype.create_data=function(e,t){return e("seminar_title").insert(t)},e.prototype.last_id=function(e){return e("seminar_title").select("id").orderBy("id","desc").limit(1)},e.prototype.update_by_id=function(e,t,r){return e("seminar_title").where("id",t).update(r)},e.prototype.check_data_by_id=function(e,t){return e("seminar_title").select("*").where("id",t)},e.prototype.check_email=function(e,t){return e("seminar_title").select("*").where("email",t)},e.prototype.remove_by_id=function(e,t){return e("seminar_title").where("id",t).del()},e.prototype.filter_data=function(e,t){try{var r=t.keyword,n=t.id,l=t.narrator_id,i=(t.location,t.province,t.telephone,t.email),o=t.start,a=t.end,s=t.start_event_end,d=t.end_event_end,u=t.pages,c=t.isCount,_=t.orderBy,p=(t.limit,t.perpage||t.sizepsge),m=t.status||1;0==c?(console.log("rows filter ",t),console.log("data keyword ",r),console.log("rows isCount ",c)):(console.log("data filter ",t),console.log("data keyword ",r),console.log("data isCount ",c));var y=(y=e("seminar_title as s")).innerJoin("sd_users_narrator as u","u.narrator_id","s.narrator_id");return y=(y=1==c?y.select("s.id as idx"):(y=(y=(y=(y=(y=(y=y.select("s.*")).select("u.firstname")).select("u.lastname")).select("u.fullname")).select("u.nickname")).select("u.date")).select("u.email")).where("s.status",m),null!=n&&(y=y.andWhere("s.id ",n)),null!=l&&(y=y.andWhere("u.narrator_id",l)),null!=i&&(y=y.andWhere("u.email","like","%".concat(i,"%"))),null!=r&&(y=y.andWhere("s.title","like","%".concat(r,"%"))),null!=o&&null!=a&&(y=y.andWhereBetween("u.datetime_start",[o,a])),null!=s&&null!=d&&(y=y.andWhereBetween("u.datetime_end",[s,d])),y=null==n?null==_?y.orderBy("u.id","desc"):"desc"==_?y.orderBy("s.id","desc"):y.orderBy("s.id","asc"):y.orderBy("s.id","asc"),y=null==p&&null==u?y:(y=y.limit(p)).offset(p*(u-1))}catch(e){console.log("err=>",e),e&&process.exit(1)}},e}();exports.SeminarTitleModel=SeminarTitleModel;