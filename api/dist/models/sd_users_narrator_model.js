"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SdusersNarratorModel=void 0;var SdusersNarratorModel=function(){function r(){}return r.prototype.create_data=function(r,e){return r("sd_users_narrator").insert(e)},r.prototype.last_narrator_id=function(r){return r("sd_users_narrator").select("narrator_id").orderBy("narrator_id","desc").limit(1)},r.prototype.update_by_narrator_id=function(r,e,t){return r("sd_users_narrator").where("narrator_id",e).update(t)},r.prototype.validation_email=function(r,e){return r("sd_users_narrator").select("email").where("email",e)},r.prototype.check_data_by_narrator_id=function(r,e){return r("sd_users_narrator").select("*").where("narrator_id",e)},r.prototype.remove_by_narrator_id=function(r,e){return r("sd_users_narrator").where("narrator_id",e).del()},r.prototype.last_id=function(r){return r("sd_users_narrator").select("narrator_id").orderBy("narrator_id","desc").limit(1)},r.prototype.activate=function(r,e,t){return r("sd_users_narrator").where("narrator_id",e).update(t)},r.prototype.login=function(r,e,t){return r("sd_users_narrator").select("firstname,lastname,fullname,nickname,idcard,date,username,email,avatar,remark,gender,birthday,last_sign_in,status").where("username",e).andWhere("password",t)},r.prototype.filter_data=function(r,e){try{var t=e.keyword,a=e.seminar_id,s=(e.narrator_id,e.narrator_narrator_id,e.email,e.start),o=e.end,n=e.pages,d=e.isCount,u=e.orderBy,i=(e.limit,e.perpage||e.sizepsge),l=e.status||1,_=(0==d?(console.log("rows filter ",e),console.log("data keyword ",t),console.log("rows isCount ",d)):(console.log("data filter ",e),console.log("data keyword ",t),console.log("data isCount ",d)),r("sd_users_narrator as u"));return _=(_=1==d?_.select("u.narrator_id"):(_=(_=(_=(_=(_=(_=(_=(_=(_=(_=(_=(_=(_=_.select("u.narrator_id")).select("u.firstname")).select("u.lastname")).select("u.fullname")).select("u.nickname")).select("u.fullname")).select("u.idcard")).select("u.status")).select("u.date")).select("u.avatar")).select("u.gender")).select("u.birthday")).select("u.last_sign_in")).select("u.email")).where("us.status",l),""!=a&&null!=a&&(_=_.andWhere("us.seminar_id",a)),_=(_=null!=s&&null!=o?_.andWhereBetween("t.datetime_start",[s,o]):_).groupBy("us.seminar_id"),_=(_=(_=(null==a||0==a)&&(""==u&&null===u||"desc"==u)?_.orderBy("us.seminar_id","desc"):_.orderBy("us.seminar_id","asc")).limit(i)).offset(n),console.log("query=>",_),_}catch(r){console.log("err=>",r),r&&process.exit(1)}},r}();exports.SdusersNarratorModel=SdusersNarratorModel;