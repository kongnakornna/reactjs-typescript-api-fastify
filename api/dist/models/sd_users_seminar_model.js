"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SdusersSeminarModel=void 0;var SdusersSeminarModel=function(){function e(){}return e.prototype.create_data=function(e,r){return e("sd_users_seminar").insert(r)},e.prototype.last_seminar_id=function(e){return e("sd_users_seminar").select("seminar_id").orderBy("seminar_id","desc").limit(1)},e.prototype.activate=function(e,r,s){return e("sd_users_seminar").where("seminar_id",r).update(s)},e.prototype.login=function(e,r,s){return e("sd_users_seminar").select("seminar_id").select("firstname").select("lastname").select("phonenumber").select("email").select("status").where("email",r).andWhere("password",s)},e.prototype.update_by_seminar_id=function(e,r,s){return e("sd_users_seminar").where("seminar_id",r).update(s)},e.prototype.validation_email=function(e,r){return e("sd_users_seminar").select("*").where("email",r)},e.prototype.check_data_by_seminar_id=function(e,r){return e("sd_users_seminar").select("*").where("seminar_id",r)},e.prototype.remove_by_seminar_id=function(e,r){return e("sd_users_seminar").where("seminar_id",r).del()},e.prototype.filter_data=function(e,r){try{r.keyword;var s=r.seminar_id||null,t=r.title_id||null,i=(r.email,r.start||null),n=r.end||null,a=r.pages||1,l=r.isCount||null,u=r.orderBy||null,d=(r.limit,r.perpage||50),o=r.status||1,_=(console.log("filter_title_users_seminar filter=>",r),e("seminar_title as s"));return _=(_=(_=_.innerJoin("sd_users_narrator as u","u.narrator_id","s.narrator_id")).leftJoin("seminarregister as r","r.seminar_id","s.id")).leftJoin("sd_users_seminar as us","us.seminar_id","r.seminar_id"),_=(_=1==l?_.select("s.id as idx"):(_=(_=(_=(_=(_=(_=_.select("s.id as idx")).select("u.firstname")).select("u.lastname")).select("u.fullname")).select("u.nickname")).select("u.date")).select("u.email")).where("us.status",o),""!=s&&null!=s&&(_=_.andWhere("us.seminar_id",s)),null!=t&&0!=t&&(_=_.andWhere("t.id",t)),_=(_=null!=i&&null!=n?_.andWhereBetween("t.datetime_start",[i,n]):_).groupBy("us.seminar_id"),_=(_=(_=(null==s||0==s)&&(""==u&&null===u||"desc"==u)?_.orderBy("us.seminar_id","desc"):_.orderBy("us.seminar_id","asc")).limit(d)).offset(a),console.log("query=>",_),_}catch(e){console.log("err=>",e),e&&process.exit(1)}},e}();exports.SdusersSeminarModel=SdusersSeminarModel;