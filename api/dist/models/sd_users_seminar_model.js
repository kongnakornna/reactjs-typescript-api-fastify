"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SdusersSeminarModel=void 0;var SdusersSeminarModel=function(){function e(){}return e.prototype.create_data=function(e,r){return e("sd_users_seminar").insert(r)},e.prototype.last_seminar_id=function(e){return e("sd_users_seminar").select("seminar_id").orderBy("seminar_id","desc").limit(1)},e.prototype.activate=function(e,r,s){return e("sd_users_seminar").where("seminar_id",r).update(s)},e.prototype.login=function(e,r,s){return e("sd_users_seminar").select("seminar_id").select("firstname").select("lastname").select("phonenumber").select("email").select("status").where("email",r).andWhere("password",s)},e.prototype.update_by_seminar_id=function(e,r,s){return e("sd_users_seminar").where("seminar_id",r).update(s)},e.prototype.validation_email=function(e,r){return e("sd_users_seminar").select("*").where("email",r)},e.prototype.check_data_by_seminar_id=function(e,r){return e("sd_users_seminar").select("*").where("seminar_id",r)},e.prototype.remove_by_seminar_id=function(e,r){return e("sd_users_seminar").where("seminar_id",r).del()},e.prototype.filter_data=function(e,r){try{var s=r.keyword||null,t=r.seminar_id||null,n=r.title_id||null,i=(r.email,r.start||null),a=r.end||null,l=r.pages||1,u=r.isCount||null,d=r.orderBy||null,o=(r.limit,r.perpage||50),_=r.status||1,m=(console.log("filter_title_users_seminar filter=>",r),e("seminar_title as s"));return m=(m=(m=m.innerJoin("sd_users_narrator as u","u.narrator_id","s.narrator_id")).leftJoin("seminarregister as r","r.seminar_id","s.id")).leftJoin("sd_users_seminar as us","us.seminar_id","r.seminar_id"),m=(m=1==u?m.select("s.id as idx"):(m=(m=(m=(m=(m=(m=m.select("s.id as idx")).select("u.firstname")).select("u.lastname")).select("u.fullname")).select("u.nickname")).select("u.date")).select("u.email")).where("us.status",_),""!=t&&null!=t&&(m=m.andWhere("us.seminar_id",t)),null!=n&&0!=n&&(m=m.andWhere("t.id",n)),null!=s&&(m=m.andWhere("t.title","like","%".concat(s,"%"))),m=(m=null!=i&&null!=a?m.andWhereBetween("t.datetime_start",[i,a]):m).groupBy("us.seminar_id"),m=(m=(m=(null==t||0==t)&&(""==d&&null===d||"desc"==d)?m.orderBy("us.seminar_id","desc"):m.orderBy("us.seminar_id","asc")).limit(o)).offset(o*(l-1)),console.log("query=>",m),m}catch(e){console.log("err=>",e),e&&process.exit(1)}},e}();exports.SdusersSeminarModel=SdusersSeminarModel;