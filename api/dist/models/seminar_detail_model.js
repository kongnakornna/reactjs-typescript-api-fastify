"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SeminarDetailModel=void 0;var SeminarDetailModel=function(){function e(){}return e.prototype.create_data=function(e,t){return e("seminar_detail").insert(t)},e.prototype.last_id=function(e){return e("seminar_detail").select("id").orderBy("id","desc").limit(1)},e.prototype.update_by_id=function(e,t,a){return e("seminar_detail").where("id",t).update(a)},e.prototype.check_data_by_id=function(e,t){return e("seminar_detail").select("*").where("id",t)},e.prototype.remove_by_id=function(e,t){return e("seminar_detail").where("id",t).del()},e.prototype.filter_data=function(e,t){try{var a=t.keyword,r=t.id,s=t.title_id,i=(t.location,t.province,t.telephone,t.email,t.start),n=t.end,l=t.start_event_end,d=t.end_event_end,o=t.pages,c=t.isCount,u=t.orderBy,_=(t.limit,t.perpage||t.sizepsge),m=t.status||1,p=(0==c?(console.log("rows filter ",t),console.log("data keyword ",a),console.log("rows isCount ",c)):(console.log("data filter ",t),console.log("data keyword ",a),console.log("data isCount ",c)),e("seminar_detail as s"));return p=(p=p.innerJoin("seminar_title as t","t.id","s.seminar_title_id")).innerJoin("sd_users_narrator as u","u.narrator_id","t.narrator_id"),p=(p=1==c?p.select("s.id as idx"):(p=(p=(p=(p=(p=(p=(p=(p=(p=(p=(p=(p=p.select("s.id as idx")).select("t.title as title_name")).select("s.title as detail_name")).select("t.title as title_name")).select("t.detail as title_detail")).select("t.url as title_url")).select("s.startdate as startdate")).select("s.enddate as enddate")).select("u.firstname")).select("u.lastname")).select("u.fullname as narrator_fullname")).select("u.nickname as narrator_nickname")).select("u.email")).where("s.status",m),""==r&&0===r||(p=p.andWhere("s.id ",r)),""==s&&0===s||(p=p.andWhere("t.id",s)),null!=a&&p.andWhere("s.title",{keyword:a?"%".concat(a,"%"):"%"}),null!=i&&null!=n&&(p=p.andWhereBetween("s.startdate",[i,n])),p=(p=null!=l&&null!=d?p.andWhereBetween("s.enddate",[i,n]):p).groupBy("s.id"),p=(p=(p=""!=r||0!==r?p.orderBy("s.id","asc"):""!=u||null!==u?"desc"==u?p.orderBy("s.id","desc"):p.orderBy("s.id","asc"):p.orderBy("u.id","desc")).limit(_)).offset(o),console.log("query=>",p),p}catch(e){console.log("err=>",e),e&&process.exit(1)}},e}();exports.SeminarDetailModel=SeminarDetailModel;